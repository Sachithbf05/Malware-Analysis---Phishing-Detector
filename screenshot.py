import logging
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from colorama import Fore, Style

def take_screenshot(url, save_path):
    # Configure Chrome options for headless browsing
    chrome_options = Options()
    chrome_options.add_argument("--headless")  # Ensure GUI is off
    # chrome_options.add_argument("--no-sandbox")
    chrome_options.add_argument("--window-size=1920x1080")
    chrome_options.add_argument('log-level=0')
    # disable error logs

    # Set path to your Chromedriver executable
    webdriver_path = 'chromedriver.exe'

    # Set the log level of the Selenium logger to None
    logging.getLogger('selenium').setLevel(logging.ERROR)

    # Initialize Chrome webdriver
    driver = webdriver.Chrome(executable_path=webdriver_path, options=chrome_options)

    try:
        print(f"{Fore.GREEN}[INFO] Taking screenshosts of {url} {Style.RESET_ALL}")
        # Navigate to the URL
        driver.get(url)

        # Take a screenshot and save it
        driver.save_screenshot(save_path)
        print(f"{Fore.GREEN}[INFO] Screenshot saved at {save_path} {Style.RESET_ALL}")

        return 1
    except Exception as e:
        print(f"{Fore.RED}[ERROR] An error occurred while trying to take a screenshot of {url} {Style.RESET_ALL}")
        return 0
    
        # print(f"An error occurred: {str(e)}")
    finally:
        # Close the browser window and quit the driver
        driver.quit()