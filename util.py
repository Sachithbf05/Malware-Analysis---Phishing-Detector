import re
import os


def extractURLs(data):
    # regex for urls
    # url = re.findall('https?://(?:[-\w.]|(?:%[\da-fA-F]{2}))+', data)
    url = re.findall('https?://\S+', data)
    # remove prefix characters
    url = [re.sub(r'^[<>()[\]{}"\',\\|;:.,!?@#$%^&*_]', '', i) for i in url]
    # remove suffix characters
    url = [re.sub(r'[<>()[\]{}"\',\\|;:.,!?@#$%^&*_]$', '', i) for i in url]
    # remove empty strings
    url = list(filter(None, url))
    # look for " and remove strings after it
    url = [re.sub(r'".*$', '', i) for i in url]
    # check for html tags and remove them and anything after
    url = [re.sub(r'<.*$', '', i) for i in url]

    # remove duplicates
    url = list(dict.fromkeys(url))

    with open('urls.txt', 'w') as f:
        for item in url:
            f.write("%s\n" % item)
    return url


def cleanScreenshotsFolder():
    # create folder called screenshots if it doesn't exist, and remove all files in it
    if not os.path.exists('screenshots'):
        os.makedirs('screenshots')
    else:
        for root, dirs, files in os.walk('screenshots'):
            for file in files:
                os.remove(os.path.join(root, file))

    return
